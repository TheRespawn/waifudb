<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Waifu Database</title>
  <link rel="icon" type="image/x-icon" href="icon.ico">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, var(--bg-start, #ffe0f0), var(--bg-end, #f4f7fa));
      margin: 0;
      padding: 2rem;
      display: flex;
      flex-wrap: wrap;
      min-height: 100vh;
      flex-direction: row;
      position: relative;
    }

    h1 {
      text-align: center;
      color: var(--h1-color, #ff66a3);
      margin-bottom: 1rem;
    }

    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
      gap: 1rem;
    }

    .tabs button {
      background: var(--tab-bg, #ff99cc);
      border: none;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s;
    }

    .tabs button:hover {
      background: var(--tab-hover, #ff66a3);
    }

    .search-bar {
      text-align: center;
      margin-bottom: 2rem;
    }

    .search-bar input {
      padding: 0.6rem;
      width: 250px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .results {
      max-width: 1000px;
      margin: auto;
    }

    table {
      width: 100%;
      background: white;
      border-collapse: collapse;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    th {
      background: var(--th-bg, #ffccdd);
      padding: 1rem;
      border-bottom: 1px solid #eee;
      text-align: left;
    }

    td {
      padding: 1rem;
      border-bottom: 1px solid #eee;
      text-align: left;
    }

    tr:hover {
      background: var(--hover-bg, #fff0f5);
    }

    td img {
      border-radius: 6px;
      object-fit: cover;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      width: 50px;
      height: 50px;
    }

    .sidebar {
      width: 300px;
      background: #fff;
      padding: 1.5rem;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      margin-right: 2rem;
    }

    .sidebar h2 {
      color: var(--sidebar-h2, #ff66a3);
      margin-top: 0;
    }

    .sidebar label {
      display: block;
      margin: 0.5rem 0 0.2rem;
      color: #555;
    }

    .sidebar input, .sidebar textarea {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-bottom: 1rem;
    }

    .sidebar button {
      background: var(--tab-bg, #ff99cc);
      border: none;
      color: white;
      padding: 0.75rem;
      width: 100%;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .sidebar button:hover {
      background: var(--tab-hover, #ff66a3);
    }

    .main-content {
      flex: 1;
      max-width: 1000px;
    }

    .banner-container {
      width: 300px;
      margin-left: 2rem;
      text-align: center;
    }

    #image-banner {
      width: 100%;
      height: 600px;
      overflow: hidden;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      background-color: var(--banner-bg, #fff0f5);
      box-sizing: border-box;
    }

    #image-banner img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: none;
      transition: opacity 0.5s ease-in-out;
      padding: 10px;
      box-sizing: border-box;
    }

    #image-banner img.active {
      display: block;
      opacity: 1;
    }

    .next-button, .gamble-button {
      background: var(--tab-bg, #ff99cc);
      border: none;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s;
      margin-top: 1rem;
    }

    .next-button:hover, .gamble-button:hover {
      background: var(--tab-hover, #ff66a3);
    }

    .banner-text {
      width: 100%;
      text-align: center;
      font-size: 0.9rem;
      color: #555;
      margin-top: 0.5rem;
      max-width: 300px;
    }

    footer {
      background-color: var(--footer-bg, #fce4ec);
      padding: 1.5rem;
      text-align: center;
      font-size: 0.9rem;
      color: var(--footer-text, #555);
      width: 100%;
      position: relative;
      margin-top: auto;
      border-top: 1px solid #ddd;
    }

    footer a {
      color: #d81b60;
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    .footer-links {
      display: flex;
      justify-content: space-around;
      max-width: 600px;
      margin: 0 auto 1rem;
      flex-wrap: wrap;
    }

    .footer-links div {
      margin: 0 1rem;
    }

    .footer-links a {
      display: block;
      color: var(--footer-text, #555);
      text-decoration: none;
      margin: 0.5rem 0;
    }

    .footer-links a:hover {
      text-decoration: underline;
    }

    .form-section {
      display: none;
    }

    .form-section.active {
      display: block;
    }

    .theme-menu {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: var(--tab-bg, #ff99cc);
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 0.5rem;
      cursor: pointer;
    }

    .theme-menu select {
      background: var(--tab-bg, #ff99cc);
      border: none;
      font-size: 1rem;
      color: white;
      cursor: pointer;
      padding: 0.25rem;
    }

    .theme-menu select:hover {
      background: var(--tab-hover, #ff66a3);
    }
  </style>
</head>
<body>
  <div class="theme-menu">
    <select onchange="changeTheme(this.value)">
      <option value="0">Pink</option>
      <option value="1">Red-Purple</option>
      <option value="2">Green</option>
      <option value="3">Yellow</option>
      <option value="4">Red</option>
      <option value="5">Black-Gray-White</option>
      <option value="6">Blue</option>
      <option value="7">Orange</option>
      <option value="8">Teal</option>
      <option value="9">Purple</option>
      <option value="10">Pastel</option>
    </select>
  </div>
  <div class="sidebar">
    <div id="waifu-form" class="form-section active">
      <h2>Add Waifu</h2>
      <form id="add-waifu-form">
        <label for="waifuName">Name</label>
        <input type="text" id="waifuName" required />
        <label for="waifuOrigin">Origin</label>
        <input type="text" id="waifuOrigin" required />
        <label for="waifuPersonality">Personality</label>
        <textarea id="waifuPersonality" required></textarea>
        <label for="waifuAppearance">Appearance</label>
        <textarea id="waifuAppearance" required></textarea>
        <label for="waifuPopularity">Popularity</label>
        <input type="number" id="waifuPopularity" min="0" max="10" step="0.1" required />
        <label for="waifuMedia">Media</label>
        <input type="text" id="waifuMedia" />
        <label for="waifuVoiceActor">Voice Actor</label>
        <input type="text" id="waifuVoiceActor" />
        <label for="waifuImage">Image URL</label>
        <input type="url" id="waifuImage" required />
        <button type="button" onclick="addWaifu()">Add Waifu</button>
      </form>
      <h2>Delete Waifu</h2>
      <form id="delete-waifu-form">
        <label for="waifuIdentifier">Waifu ID or Name</label>
        <input type="text" id="waifuIdentifier" required />
        <button type="button" onclick="deleteWaifu()">Delete Waifu</button>
      </form>
    </div>
    <div id="media-form" class="form-section">
      <h2>Add Media</h2>
      <form id="add-media-form">
        <label for="mediaTitle">Title</label>
        <input type="text" id="mediaTitle" required />
        <label for="mediaType">Type</label>
        <input type="text" id="mediaType" />
        <label for="mediaReleaseYear">Release Year</label>
        <input type="number" id="mediaReleaseYear" />
        <label for="mediaStudio">Studio ID</label>
        <input type="text" id="mediaStudio" />
        <button type="button" onclick="addMedia()">Add Media</button>
      </form>
      <h2>Delete Media</h2>
      <form id="delete-media-form">
        <label for="mediaIdentifier">Media ID or Title</label>
        <input type="text" id="mediaIdentifier" required />
        <button type="button" onclick="deleteMedia()">Delete Media</button>
      </form>
    </div>
    <div id="studio-form" class="form-section">
      <h2>Add Studio</h2>
      <form id="add-studio-form">
        <label for="studioName">Name</label>
        <input type="text" id="studioName" required />
        <label for="studioLocation">Location</label>
        <input type="text" id="studioLocation" />
        <label for="studioFoundedYear">Founded Year</label>
        <input type="number" id="studioFoundedYear" />
        <button type="button" onclick="addStudio()">Add Studio</button>
      </form>
      <h2>Delete Studio</h2>
      <form id="delete-studio-form">
        <label for="studioIdentifier">Studio ID or Name</label>
        <input type="text" id="studioIdentifier" required />
        <button type="button" onclick="deleteStudio()">Delete Studio</button>
      </form>
    </div>
    <div id="voice-form" class="form-section">
      <h2>Add Voice Actor</h2>
      <form id="add-voice-form">
        <label for="voiceName">Name</label>
        <input type="text" id="voiceName" required />
        <label for="voiceNationality">Nationality</label>
        <input type="text" id="voiceNationality" />
        <label for="voiceAgency">Agency</label>
        <input type="text" id="voiceAgency" />
        <button type="button" onclick="addVoiceActor()">Add Voice Actor</button>
      </form>
      <h2>Delete Voice Actor</h2>
      <form id="delete-voice-form">
        <label for="voiceIdentifier">Voice Actor ID or Name</label>
        <input type="text" id="voiceIdentifier" required />
        <button type="button" onclick="deleteVoiceActor()">Delete Voice Actor</button>
      </form>
    </div>
    <div id="fandom-form" class="form-section">
      <h2>Add Fandom</h2>
      <form id="add-fandom-form">
        <label for="fandomWaifuID">Waifu ID</label>
        <input type="text" id="fandomWaifuID" />
        <label for="fandomFanClubName">Fan Club Name</label>
        <input type="text" id="fandomFanClubName" required />
        <label for="fandomMemberCount">Member Count</label>
        <input type="number" id="fandomMemberCount" />
        <label for="fandomPlatform">Platform</label>
        <input type="text" id="fandomPlatform" />
        <button type="button" onclick="addFandom()">Add Fandom</button>
      </form>
      <h2>Delete Fandom</h2>
      <form id="delete-fandom-form">
        <label for="fandomIdentifier">Fandom ID or Fan Club Name</label>
        <input type="text" id="fandomIdentifier" required />
        <button type="button" onclick="deleteFandom()">Delete Fandom</button>
      </form>
    </div>
    <div id="abilities-form" class="form-section">
      <h2>Add Ability</h2>
      <form id="add-abilities-form">
        <label for="abilityWaifuID">Waifu ID</label>
        <input type="text" id="abilityWaifuID" />
        <label for="abilityName">Name</label>
        <input type="text" id="abilityName" required />
        <label for="abilityDescription">Description</label>
        <textarea id="abilityDescription"></textarea>
        <label for="abilityType">Type</label>
        <input type="text" id="abilityType" />
        <button type="button" onclick="addAbility()">Add Ability</button>
      </form>
      <h2>Delete Ability</h2>
      <form id="delete-abilities-form">
        <label for="abilityIdentifier">Ability ID or Name</label>
        <input type="text" id="abilityIdentifier" required />
        <button type="button" onclick="deleteAbility()">Delete Ability</button>
      </form>
    </div>
    <div id="events-form" class="form-section">
      <h2>Add Event</h2>
      <form id="add-events-form">
        <label for="eventName">Name</label>
        <input type="text" id="eventName" required />
        <label for="eventLocation">Location</label>
        <input type="text" id="eventLocation" />
        <label for="eventDate">Date</label>
        <input type="date" id="eventDate" />
        <button type="button" onclick="addEvent()">Add Event</button>
      </form>
      <h2>Delete Event</h2>
      <form id="delete-events-form">
        <label for="eventIdentifier">Event ID or Name</label>
        <input type="text" id="eventIdentifier" required />
        <button type="button" onclick="deleteEvent()">Delete Event</button>
      </form>
    </div>
    <div id="merchandise-form" class="form-section">
      <h2>Add Merchandise</h2>
      <form id="add-merchandise-form">
        <label for="merchWaifuID">Waifu ID</label>
        <input type="text" id="merchWaifuID" />
        <label for="merchName">Name</label>
        <input type="text" id="merchName" required />
        <label for="merchType">Type</label>
        <input type="text" id="merchType" />
        <label for="merchPrice">Price</label>
        <input type="number" id="merchPrice" step="0.01" />
        <label for="merchReleaseDate">Release Date</label>
        <input type="date" id="merchReleaseDate" />
        <button type="button" onclick="addMerchandise()">Add Merchandise</button>
      </form>
      <h2>Delete Merchandise</h2>
      <form id="delete-merchandise-form">
        <label for="merchIdentifier">Merchandise ID or Name</label>
        <input type="text" id="merchIdentifier" required />
        <button type="button" onclick="deleteMerchandise()">Delete Merchandise</button>
      </form>
    </div>
  </div>

  <div class="main-content">
    <h1>Waifu Database</h1>

    <div class="tabs">
      <button data-tab="waifu">Waifus</button>
      <button data-tab="media">Media</button>
      <button data-tab="studio">Studios</button>
      <button data-tab="voice">Voice Actors</button>
      <button data-tab="fandom">Fandom</button>
      <button data-tab="abilities">Abilities</button>
      <button data-tab="events">Events</button>
      <button data-tab="merchandise">Merchandise</button>
    </div>

    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search..." />
      <select id="sortSelect">
        <!-- Filled dynamically -->
      </select>
    </div>

    <div class="results" id="results">
      <!-- AJAX-injected content here -->
    </div>
  </div>

  <div class="banner-container">
    <div id="image-banner">
      <img src="images/waifu1.jpg" alt="Waifu Character 1">
      <img src="images/waifu2.png" alt="Waifu Character 2">
      <img src="images/waifu3.png" alt="Waifu Character 3">
      <img src="images/waifu4.jpg" alt="Waifu Character 4">
      <img src="images/waifu5.webp" alt="Waifu Character 5">
      <img src="images/waifu6.webp" alt="Waifu Character 6">
      <img src="images/waifu7.webp" alt="Waifu Character 7">
      <img src="images/waifu8.png" alt="Waifu Character 8">
      <img src="images/waifu9.webp" alt="Waifu Character 9">
    </div>
    <button class="next-button" onclick="skipImage()">Next</button>
    <button class="gamble-button" onclick="gambleImage()">Gamble</button>
    <div class="banner-text">There are hot Waifus in your area waiting for you</div>
  </div>

  <footer>
    <div class="footer-links">
      <div>
        <a href="#">LEGAL</a>
        <a href="#">Content Removal</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
        <a href="#">FAQ</a>
      </div>
      <div>
        <a href="#">COMMUNITY</a>
        <a href="#">Patreon</a>
        <a href="#">Discord</a>
      </div>
      <div>
        <a href="#">ABOUT</a>
        <a href="#">About</a>
      </div>
    </div>
    <div class="impressum">
      <p>© 2025 Waifu Database. Alle Rechte vorbehalten.</p>
      <p><strong>Impressum:</strong> Sigma Rizzler, Diddystraße 69, 696969 Ohio<br>
      E-Mail: <a href="mailto:sigma@fortnite.de">sigma@fortnite.de"></a></p>
    </div>
  </footer>

  <script>
    let currentTab = 'waifu';
    let searchInput, sortSelect;
    let themeIndex = 0;

    // Define all themes with their respective colors
    const themes = [
      { bgStart: '#ffe0f0', bgEnd: '#f4f7fa', tabBg: '#ff99cc', tabHover: '#ff66a3', thBg: '#ffccdd', h1Color: '#ff66a3', sidebarH2: '#ff66a3', bannerBg: '#fff0f5', footerBg: '#fce4ec', footerText: '#555', hoverBg: '#fff0f5' }, // Pink
      { bgStart: '#4a1e2e', bgEnd: '#2d1b24', tabBg: '#6b2d3a', tabHover: '#8a2e3b', thBg: '#7a3d4c', h1Color: '#ff4d6d', sidebarH2: '#ff4d6d', bannerBg: '#3a1e2a', footerBg: '#2d1b24', footerText: '#e0e0e0', hoverBg: '#3a2d3a' }, // Red-Purple
      { bgStart: '#d4e4d2', bgEnd: '#e6f0e6', tabBg: '#81c784', tabHover: '#66bb6a', thBg: '#a5d6a7', h1Color: '#2e7d32', sidebarH2: '#2e7d32', bannerBg: '#e0f0e0', footerBg: '#c8e6c9', footerText: '#2e7d32', hoverBg: '#d0e0d0' }, // Green
      { bgStart: '#fff9e6', bgEnd: '#fff3cc', tabBg: '#ffca28', tabHover: '#ffb300', thBg: '#ffe082', h1Color: '#f57f17', sidebarH2: '#f57f17', bannerBg: '#fffde7', footerBg: '#fff9e6', footerText: '#f57f17', hoverBg: '#fff0d0' }, // Yellow
      { bgStart: '#ffebee', bgEnd: '#ffcdd2', tabBg: '#ef5350', tabHover: '#e53935', thBg: '#ef9a9a', h1Color: '#c62828', sidebarH2: '#c62828', bannerBg: '#ffebee', footerBg: '#ffcdd2', footerText: '#c62828', hoverBg: '#ffd0d0' }, // Red
      { bgStart: '#212121', bgEnd: '#bdbdbd', tabBg: '#616161', tabHover: '#424242', thBg: '#757575', h1Color: '#ffffff', sidebarH2: '#a0a0a0', bannerBg: '#424242', footerBg: '#212121', footerText: '#e0e0e0', hoverBg: '#4a4a4a' }, // Black-Gray-White
      { bgStart: '#e3f2fd', bgEnd: '#bbdefb', tabBg: '#42a5f5', tabHover: '#2196f3', thBg: '#90caf9', h1Color: '#1976d2', sidebarH2: '#1976d2', bannerBg: '#e1f5fe', footerBg: '#bbdefb', footerText: '#1976d2', hoverBg: '#cce0ff' }, // Blue
      { bgStart: '#ffccbc', bgEnd: '#ffab91', tabBg: '#ff8a65', tabHover: '#ff7043', thBg: '#ffab91', h1Color: '#e64a19', sidebarH2: '#e64a19', bannerBg: '#ffccbc', footerBg: '#ffab91', footerText: '#e64a19', hoverBg: '#ffccbc' }, // Orange
      { bgStart: '#b2dfdb', bgEnd: '#80cbc4', tabBg: '#4db6ac', tabHover: '#26a69a', thBg: '#80cbc4', h1Color: '#00695c', sidebarH2: '#00695c', bannerBg: '#b2dfdb', footerBg: '#80cbc4', footerText: '#00695c', hoverBg: '#a0d0cc' }, // Teal
      { bgStart: '#d1c4e9', bgEnd: '#b39ddb', tabBg: '#9575cd', tabHover: '#7e57c2', thBg: '#b39ddb', h1Color: '#5e35b1', sidebarH2: '#5e35b1', bannerBg: '#d1c4e9', footerBg: '#b39ddb', footerText: '#5e35b1', hoverBg: '#c0b0e0' }, // Purple
      { bgStart: '#f5f5f5', bgEnd: '#eceff1', tabBg: '#b0bec5', tabHover: '#90a4ae', thBg: '#cfd8dc', h1Color: '#455a64', sidebarH2: '#455a64', bannerBg: '#f5f5f5', footerBg: '#eceff1', footerText: '#455a64', hoverBg: '#e0e0e0' } // Pastel
    ];

    const sortOptions = {
      waifu: [
        { value: "", text: "Sort by..." },
        { value: "popularity_desc", text: "Popularity ↓" },
        { value: "popularity_asc", text: "Popularity ↑" }
      ],
      media: [
        { value: "", text: "Sort by..." },
        { value: "release_desc", text: "Release Year ↓" },
        { value: "release_asc", text: "Release Year ↑" }
      ],
      studio: [
        { value: "", text: "Sort by..." },
        { value: "founded_desc", text: "Founded Year ↓" },
        { value: "founded_asc", text: "Founded Year ↑" }
      ],
      voice: [
        { value: "", text: "Sort by..." }
      ],
      fandom: [
        { value: "", text: "Sort by..." },
        { value: "members_desc", text: "Members ↓" },
        { value: "members_asc", text: "Members ↑" }
      ],
      abilities: [
        { value: "", text: "Sort by..." },
        { value: "type", text: "Type" },
        { value: "name", text: "Name" }
      ],
      events: [
        { value: "", text: "Sort by..." },
        { value: "date_desc", text: "Date ↓" },
        { value: "date_asc", text: "Date ↑" }
      ],
      merchandise: [
        { value: "", text: "Sort by..." },
        { value: "price_desc", text: "Price ↓" },
        { value: "price_asc", text: "Price ↑" },
        { value: "release_desc", text: "Release Date ↓" },
        { value: "release_asc", text: "Release Date ↑" }
      ]
    };

    let sortPerTab = {
      waifu: "",
      media: "",
      studio: "",
      voice: "",
      fandom: "",
      abilities: "",
      events: "",
      merchandise: ""
    };

    function showForm(tab) {
      document.querySelectorAll('.form-section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(`${tab}-form`).classList.add('active');
    }

    function loadData(tab) {
      currentTab = tab;
      showForm(tab);
      const search = searchInput.value;
      const sort = sortPerTab[tab];

      sortSelect.innerHTML = "";
      sortOptions[tab].forEach(opt => {
        const option = document.createElement("option");
        option.value = opt.value;
        option.textContent = opt.text;
        if (opt.value === sort) option.selected = true;
        sortSelect.appendChild(option);
      });

      fetch(`${tab}.php?search=${encodeURIComponent(search)}&sort=${sort}`)
        .then(res => res.text())
        .then(html => {
          document.getElementById("results").innerHTML = html;
        })
        .catch(err => {
          document.getElementById("results").innerHTML = "<p style='color:red;'>Error loading data.</p>";
          console.error(err);
        });
    }

    function addWaifu() {
      const waifu = {
        name: document.getElementById('waifuName').value.trim(),
        origin: document.getElementById('waifuOrigin').value.trim(),
        personality: document.getElementById('waifuPersonality').value.trim(),
        appearance: document.getElementById('waifuAppearance').value.trim(),
        popularity: document.getElementById('waifuPopularity').value,
        media: document.getElementById('waifuMedia').value.trim(),
        voiceActor: document.getElementById('waifuVoiceActor').value.trim(),
        imageURL: document.getElementById('waifuImage').value.trim()
      };

      fetch('add_waifu.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(waifu)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Waifu added successfully!');
            loadData('waifu');
            document.getElementById('add-waifu-form').reset();
          } else {
            alert('Error adding waifu: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding waifu.');
          console.error(err);
        });
    }

    function deleteWaifu() {
      const identifier = document.getElementById('waifuIdentifier').value.trim();

      fetch('delete_waifu.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ identifier })
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Waifu deleted successfully!');
            loadData('waifu');
            document.getElementById('delete-waifu-form').reset();
          } else {
            alert('Error deleting waifu: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error deleting waifu.');
          console.error(err);
        });
    }

    function addMedia() {
      const media = {
        title: document.getElementById('mediaTitle').value.trim(),
        type: document.getElementById('mediaType').value.trim(),
        releaseYear: document.getElementById('mediaReleaseYear').value,
        studioID: document.getElementById('mediaStudio').value.trim()
      };

      fetch('add_media.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(media)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Media added successfully!');
            loadData('media');
            document.getElementById('add-media-form').reset();
          } else {
            alert('Error adding media: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding media.');
          console.error(err);
        });
    }

    function deleteMedia() {
      const identifier = document.getElementById('mediaIdentifier').value.trim();

      fetch('delete_media.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ identifier })
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Media deleted successfully!');
            loadData('media');
            document.getElementById('delete-media-form').reset();
          } else {
            alert('Error deleting media: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error deleting media.');
          console.error(err);
        });
    }

    function addStudio() {
      const studio = {
        name: document.getElementById('studioName').value.trim(),
        location: document.getElementById('studioLocation').value.trim(),
        foundedYear: document.getElementById('studioFoundedYear').value
      };

      fetch('add_studio.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(studio)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Studio added successfully!');
            loadData('studio');
            document.getElementById('add-studio-form').reset();
          } else {
            alert('Error adding studio: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding studio.');
          console.error(err);
        });
    }

    function deleteStudio() {
      const identifier = document.getElementById('studioIdentifier').value.trim();

      fetch('delete_studio.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ identifier })
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Studio deleted successfully!');
            loadData('studio');
            document.getElementById('delete-studio-form').reset();
          } else {
            alert('Error deleting studio: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error deleting studio.');
          console.error(err);
        });
    }

    function addVoiceActor() {
      const voiceActor = {
        name: document.getElementById('voiceName').value.trim(),
        nationality: document.getElementById('voiceNationality').value.trim(),
        agency: document.getElementById('voiceAgency').value.trim()
      };

      fetch('add_voiceactor.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(voiceActor)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Voice Actor added successfully!');
            loadData('voice');
            document.getElementById('add-voice-form').reset();
          } else {
            alert('Error adding voice actor: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding voice actor.');
          console.error(err);
        });
    }

    function deleteVoiceActor() {
      const identifier = document.getElementById('voiceIdentifier').value.trim();

      fetch('delete_voiceactor.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ identifier })
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Voice Actor deleted successfully!');
            loadData('voice');
            document.getElementById('delete-voice-form').reset();
          } else {
            alert('Error deleting voice actor: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error deleting voice actor.');
          console.error(err);
        });
    }

    function addFandom() {
      const fandom = {
        waifuID: document.getElementById('fandomWaifuID').value.trim(),
        fanClubName: document.getElementById('fandomFanClubName').value.trim(),
        memberCount: document.getElementById('fandomMemberCount').value,
        platform: document.getElementById('fandomPlatform').value.trim()
      };

      fetch('add_fandom.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(fandom)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Fandom added successfully!');
            loadData('fandom');
            document.getElementById('add-fandom-form').reset();
          } else {
            alert('Error adding fandom: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding fandom.');
          console.error(err);
        });
    }

    function deleteFandom() {
      const identifier = document.getElementById('fandomIdentifier').value.trim();

      fetch('delete_fandom.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ identifier })
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Fandom deleted successfully!');
            loadData('fandom');
            document.getElementById('delete-fandom-form').reset();
          } else {
            alert('Error deleting fandom: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error deleting fandom.');
          console.error(err);
        });
    }

    function addAbility() {
      const ability = {
        waifuID: document.getElementById('abilityWaifuID').value.trim(),
        name: document.getElementById('abilityName').value.trim(),
        description: document.getElementById('abilityDescription').value.trim(),
        type: document.getElementById('abilityType').value.trim()
      };

      fetch('add_ability.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(ability)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Ability added successfully!');
            loadData('abilities');
            document.getElementById('add-abilities-form').reset();
          } else {
            alert('Error adding ability: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding ability.');
          console.error(err);
        });
    }

    function deleteAbility() {
      const identifier = document.getElementById('abilityIdentifier').value.trim();

      fetch('delete_ability.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ identifier })
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Ability deleted successfully!');
            loadData('abilities');
            document.getElementById('delete-abilities-form').reset();
          } else {
            alert('Error deleting ability: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error deleting ability.');
          console.error(err);
        });
    }

    function addEvent() {
      const event = {
        name: document.getElementById('eventName').value.trim(),
        location: document.getElementById('eventLocation').value.trim(),
        date: document.getElementById('eventDate').value
      };

      fetch('add_event.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(event)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Event added successfully!');
            loadData('events');
            document.getElementById('add-events-form').reset();
          } else {
            alert('Error adding event: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding event.');
          console.error(err);
        });
    }

    function deleteEvent() {
      const identifier = document.getElementById('eventIdentifier').value.trim();

      fetch('delete_event.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ identifier })
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Event deleted successfully!');
            loadData('events');
            document.getElementById('delete-events-form').reset();
          } else {
            alert('Error deleting event: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error deleting event.');
          console.error(err);
        });
    }

    function addMerchandise() {
      const merchandise = {
        waifuID: document.getElementById('merchWaifuID').value.trim(),
        name: document.getElementById('merchName').value.trim(),
        type: document.getElementById('merchType').value.trim(),
        price: document.getElementById('merchPrice').value,
        releaseDate: document.getElementById('merchReleaseDate').value
      };

      fetch('add_merchandise.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(merchandise)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Merchandise added successfully!');
            loadData('merchandise');
            document.getElementById('add-merchandise-form').reset();
          } else {
            alert('Error adding merchandise: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding merchandise.');
          console.error(err);
        });
    }

    function deleteMerchandise() {
      const identifier = document.getElementById('merchIdentifier').value.trim();

      fetch('delete_merchandise.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ identifier })
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Merchandise deleted successfully!');
            loadData('merchandise');
            document.getElementById('delete-merchandise-form').reset();
          } else {
            alert('Error deleting merchandise: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error deleting merchandise.');
          console.error(err);
        });
    }

    const images = document.querySelectorAll('#image-banner img');
    let currentImageIndex = 0;
    let rotationInterval;

    function rotateImages() {
      images[currentImageIndex].classList.remove('active');
      currentImageIndex = (currentImageIndex + 1) % images.length;
      images[currentImageIndex].classList.add('active');
    }

    function gambleImage() {
      images[currentImageIndex].classList.remove('active');
      let newIndex;
      do {
        newIndex = Math.floor(Math.random() * images.length);
      } while (newIndex === currentImageIndex);
      currentImageIndex = newIndex;
      images[currentImageIndex].classList.add('active');
      startRotation();
    }

    function startRotation() {
      clearInterval(rotationInterval);
      rotationInterval = setInterval(rotateImages, 10000);
    }

    function skipImage() {
      rotateImages();
      startRotation();
    }

    function changeTheme(index) {
      themeIndex = parseInt(index);
      const theme = themes[themeIndex];
      document.body.style.setProperty('--bg-start', theme.bgStart);
      document.body.style.setProperty('--bg-end', theme.bgEnd);
      document.body.style.setProperty('--tab-bg', theme.tabBg);
      document.body.style.setProperty('--tab-hover', theme.tabHover);
      document.body.style.setProperty('--th-bg', theme.thBg);
      document.body.style.setProperty('--h1-color', theme.h1Color);
      document.body.style.setProperty('--sidebar-h2', theme.sidebarH2);
      document.body.style.setProperty('--banner-bg', theme.bannerBg);
      document.body.style.setProperty('--footer-bg', theme.footerBg);
      document.body.style.setProperty('--footer-text', theme.footerText);
      document.body.style.setProperty('--hover-bg', theme.hoverBg);

      document.querySelector('.theme-menu').style.background = theme.tabBg;
      document.querySelector('.theme-menu select').style.background = theme.tabBg;
      document.querySelector('.theme-menu select').style.color = '#fff';

      document.querySelectorAll('.tabs button').forEach(btn => {
        btn.style.background = theme.tabBg;
        btn.onmouseover = () => btn.style.background = theme.tabHover;
        btn.onmouseout = () => btn.style.background = theme.tabBg;
      });
      document.querySelectorAll('.sidebar button').forEach(btn => {
        btn.style.background = theme.tabBg;
        btn.onmouseover = () => btn.style.background = theme.tabHover;
        btn.onmouseout = () => btn.style.background = theme.tabBg;
      });
      document.querySelector('.next-button').style.background = theme.tabBg;
      document.querySelector('.next-button').onmouseover = () => document.querySelector('.next-button').style.background = theme.tabHover;
      document.querySelector('.next-button').onmouseout = () => document.querySelector('.next-button').style.background = theme.tabBg;
      document.querySelector('.gamble-button').style.background = theme.tabBg;
      document.querySelector('.gamble-button').onmouseover = () => document.querySelector('.gamble-button').style.background = theme.tabHover;
      document.querySelector('.gamble-button').onmouseout = () => document.querySelector('.gamble-button').style.background = theme.tabBg;
    }

    images[currentImageIndex].classList.add('active');
    startRotation();

    window.onload = () => {
      searchInput = document.getElementById("searchInput");
      sortSelect = document.getElementById("sortSelect");

      searchInput.addEventListener("input", () => loadData(currentTab));
      sortSelect.addEventListener("change", () => {
        sortPerTab[currentTab] = sortSelect.value;
        loadData(currentTab);
      });

      document.querySelectorAll(".tabs button").forEach(button => {
        button.addEventListener("click", () => {
          loadData(button.dataset.tab);
        });
      });

      loadData('waifu');
    };
  </script>
</body>
</html>