<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Waifu Database</title>
  <style>
    footer {
      background-color: #fce4ec;
      padding: 1.5rem;
      text-align: center;
      font-size: 0.9rem;
      color: #555;
      margin-top: 3rem;
      border-top: 1px solid #ddd;
    }

    footer a {
      color: #d81b60;
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #ffe0f0, #f4f7fa);
      margin: 0;
      padding: 2rem;
      display: flex;
    }

    h1 {
      text-align: center;
      color: #ff66a3;
      margin-bottom: 1rem;
    }

    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
      gap: 1rem;
    }

    .tabs button {
      background: #ff99cc;
      border: none;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s;
    }

    .tabs button:hover {
      background: #ff66a3;
    }

    .search-bar {
      text-align: center;
      margin-bottom: 2rem;
    }

    .search-bar input {
      padding: 0.6rem;
      width: 250px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .results {
      max-width: 1000px;
      margin: auto;
    }

    table {
      width: 100%;
      background: white;
      border-collapse: collapse;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    th, td {
      padding: 1rem;
      border-bottom: 1px solid #eee;
      text-align: left;
    }

    th {
      background: #ffccdd;
    }

    tr:hover {
      background: #fff0f5;
    }

    td img {
      border-radius: 6px;
      object-fit: cover;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      width: 50px;
      height: 50px;
    }

    .sidebar {
      width: 300px;
      background: #fff;
      padding: 1.5rem;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      margin-right: 2rem;
    }

    .sidebar h2 {
      color: #ff66a3;
      margin-top: 0;
    }

    .sidebar label {
      display: block;
      margin: 0.5rem 0 0.2rem;
      color: #555;
    }

    .sidebar input, .sidebar textarea {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-bottom: 1rem;
    }

    .sidebar button {
      background: #ff99cc;
      border: none;
      color: white;
      padding: 0.75rem;
      width: 100%;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .sidebar button:hover {
      background: #ff66a3;
    }

    .main-content {
      flex: 1;
    }

    .form-section {
      display: none;
    }

    .form-section.active {
      display: block;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <div id="waifu-form" class="form-section active">
      <h2>Add Waifu</h2>
      <form id="add-waifu-form">
        <label for="waifuName">Name</label>
        <input type="text" id="waifuName" required />
        <label for="waifuOrigin">Origin</label>
        <input type="text" id="waifuOrigin" required />
        <label for="waifuPersonality">Personality</label>
        <textarea id="waifuPersonality" required></textarea>
        <label for="waifuAppearance">Appearance</label>
        <textarea id="waifuAppearance" required></textarea>
        <label for="waifuPopularity">Popularity</label>
        <input type="number" id="waifuPopularity" min="0" max="10" step="0.1" required />
        <label for="waifuMedia">Media</label>
        <input type="text" id="waifuMedia" />
        <label for="waifuVoiceActor">Voice Actor</label>
        <input type="text" id="waifuVoiceActor" />
        <label for="waifuImage">Image URL</label>
        <input type="url" id="waifuImage" required />
        <button type="button" onclick="addWaifu()">Add Waifu</button>
      </form>
      <h2>Delete Waifu</h2>
      <form id="delete-waifu-form">
        <label for="waifuIdentifier">Waifu ID or Name</label>
        <input type="text" id="waifuIdentifier" required />
        <button type="button" onclick="deleteWaifu()">Delete Waifu</button>
      </form>
    </div>
    <div id="media-form" class="form-section">
      <h2>Add Media</h2>
      <form id="add-media-form">
        <label for="mediaTitle">Title</label>
        <input type="text" id="mediaTitle" required />
        <label for="mediaType">Type</label>
        <input type="text" id="mediaType" />
        <label for="mediaReleaseYear">Release Year</label>
        <input type="number" id="mediaReleaseYear" />
        <label for="mediaStudio">Studio ID</label>
        <input type="text" id="mediaStudio" />
        <button type="button" onclick="addMedia()">Add Media</button>
      </form>
    </div>
    <div id="studio-form" class="form-section">
      <h2>Add Studio</h2>
      <form id="add-studio-form">
        <label for="studioName">Name</label>
        <input type="text" id="studioName" required />
        <label for="studioLocation">Location</label>
        <input type="text" id="studioLocation" />
        <label for="studioFoundedYear">Founded Year</label>
        <input type="number" id="studioFoundedYear" />
        <button type="button" onclick="addStudio()">Add Studio</button>
      </form>
    </div>
    <div id="voice-form" class="form-section">
      <h2>Add Voice Actor</h2>
      <form id="add-voice-form">
        <label for="voiceName">Name</label>
        <input type="text" id="voiceName" required />
        <label for="voiceNationality">Nationality</label>
        <input type="text" id="voiceNationality" />
        <label for="voiceAgency">Agency</label>
        <input type="text" id="voiceAgency" />
        <button type="button" onclick="addVoiceActor()">Add Voice Actor</button>
      </form>
    </div>
    <div id="fandom-form" class="form-section">
      <h2>Add Fandom</h2>
      <form id="add-fandom-form">
        <label for="fandomWaifuID">Waifu ID</label>
        <input type="text" id="fandomWaifuID" />
        <label for="fandomFanClubName">Fan Club Name</label>
        <input type="text" id="fandomFanClubName" required />
        <label for="fandomMemberCount">Member Count</label>
        <input type="number" id="fandomMemberCount" />
        <label for="fandomPlatform">Platform</label>
        <input type="text" id="fandomPlatform" />
        <button type="button" onclick="addFandom()">Add Fandom</button>
      </form>
    </div>
    <div id="abilities-form" class="form-section">
      <h2>Add Ability</h2>
      <form id="add-abilities-form">
        <label for="abilityWaifuID">Waifu ID</label>
        <input type="text" id="abilityWaifuID" />
        <label for="abilityName">Name</label>
        <input type="text" id="abilityName" required />
        <label for="abilityDescription">Description</label>
        <textarea id="abilityDescription"></textarea>
        <label for="abilityType">Type</label>
        <input type="text" id="abilityType" />
        <button type="button" onclick="addAbility()">Add Ability</button>
      </form>
    </div>
    <div id="events-form" class="form-section">
      <h2>Add Event</h2>
      <form id="add-events-form">
        <label for="eventName">Name</label>
        <input type="text" id="eventName" required />
        <label for="eventLocation">Location</label>
        <input type="text" id="eventLocation" />
        <label for="eventDate">Date</label>
        <input type="date" id="eventDate" />
        <button type="button" onclick="addEvent()">Add Event</button>
      </form>
    </div>
    <div id="merchandise-form" class="form-section">
      <h2>Add Merchandise</h2>
      <form id="add-merchandise-form">
        <label for="merchWaifuID">Waifu ID</label>
        <input type="text" id="merchWaifuID" />
        <label for="merchName">Name</label>
        <input type="text" id="merchName" required />
        <label for="merchType">Type</label>
        <input type="text" id="merchType" />
        <label for="merchPrice">Price</label>
        <input type="number" id="merchPrice" step="0.01" />
        <label for="merchReleaseDate">Release Date</label>
        <input type="date" id="merchReleaseDate" />
        <button type="button" onclick="addMerchandise()">Add Merchandise</button>
      </form>
    </div>
  </div>

  <div class="main-content">
    <h1>Waifu Database</h1>

    <div class="tabs">
      <button data-tab="waifu">Waifus</button>
      <button data-tab="media">Media</button>
      <button data-tab="studio">Studios</button>
      <button data-tab="voice">Voice Actors</button>
      <button data-tab="fandom">Fandom</button>
      <button data-tab="abilities">Abilities</button>
      <button data-tab="events">Events</button>
      <button data-tab="merchandise">Merchandise</button>
    </div>

    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search..." />
      <select id="sortSelect">
        <!-- Filled dynamically -->
      </select>
    </div>

    <div class="results" id="results">
      <!-- AJAX-injected content here -->
    </div>
  </div>

  <footer>
    <div class="impressum">
      <p>© 2025 Waifu Database. Alle Rechte vorbehalten.</p>
      <p><strong>Impressum:</strong> Sigma Rizzler, Diddystraße 69, 696969 Ohio<br>
      E-Mail: <a href="mailto:sigma@fortnite.de">sigma@fortnite.de"></a></p>
    </div>
  </footer>

  <script>
    let currentTab = 'waifu';
    let searchInput, sortSelect;

    const sortOptions = {
      waifu: [
        { value: "", text: "Sort by..." },
        { value: "popularity_desc", text: "Popularity ↓" },
        { value: "popularity_asc", text: "Popularity ↑" }
      ],
      media: [
        { value: "", text: "Sort by..." },
        { value: "release_desc", text: "Release Year ↓" },
        { value: "release_asc", text: "Release Year ↑" }
      ],
      studio: [
        { value: "", text: "Sort by..." },
        { value: "founded_desc", text: "Founded Year ↓" },
        { value: "founded_asc", text: "Founded Year ↑" }
      ],
      voice: [
        { value: "", text: "Sort by..." }
      ],
      fandom: [
        { value: "", text: "Sort by..." },
        { value: "members_desc", text: "Members ↓" },
        { value: "members_asc", text: "Members ↑" }
      ],
      abilities: [
        { value: "", text: "Sort by..." },
        { value: "type", text: "Type" },
        { value: "name", text: "Name" }
      ],
      events: [
        { value: "", text: "Sort by..." },
        { value: "date_desc", text: "Date ↓" },
        { value: "date_asc", text: "Date ↑" }
      ],
      merchandise: [
        { value: "", text: "Sort by..." },
        { value: "price_desc", text: "Price ↓" },
        { value: "price_asc", text: "Price ↑" },
        { value: "release_desc", text: "Release Date ↓" },
        { value: "release_asc", text: "Release Date ↑" }
      ]
    };

    let sortPerTab = {
      waifu: "",
      media: "",
      studio: "",
      voice: "",
      fandom: "",
      abilities: "",
      events: "",
      merchandise: ""
    };

    function showForm(tab) {
      document.querySelectorAll('.form-section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(`${tab}-form`).classList.add('active');
    }

    function loadData(tab) {
      currentTab = tab;
      showForm(tab);
      const search = searchInput.value;
      const sort = sortPerTab[tab];

      sortSelect.innerHTML = "";
      sortOptions[tab].forEach(opt => {
        const option = document.createElement("option");
        option.value = opt.value;
        option.textContent = opt.text;
        if (opt.value === sort) option.selected = true;
        sortSelect.appendChild(option);
      });

      fetch(`${tab}.php?search=${encodeURIComponent(search)}&sort=${sort}`)
        .then(res => res.text())
        .then(html => {
          document.getElementById("results").innerHTML = html;
        })
        .catch(err => {
          document.getElementById("results").innerHTML = "<p style='color:red;'>Error loading data.</p>";
          console.error(err);
        });
    }

    function addWaifu() {
      const waifu = {
        name: document.getElementById('waifuName').value,
        origin: document.getElementById('waifuOrigin').value,
        personality: document.getElementById('waifuPersonality').value,
        appearance: document.getElementById('waifuAppearance').value,
        popularity: document.getElementById('waifuPopularity').value,
        media: document.getElementById('waifuMedia').value,
        voiceActor: document.getElementById('waifuVoiceActor').value,
        imageURL: document.getElementById('waifuImage').value
      };

      fetch('add_waifu.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(waifu)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Waifu added successfully!');
            loadData('waifu');
            document.getElementById('add-waifu-form').reset();
          } else {
            alert('Error adding waifu: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding waifu.');
          console.error(err);
        });
    }

    function deleteWaifu() {
      const identifier = document.getElementById('waifuIdentifier').value;

      fetch('delete_waifu.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ identifier })
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Waifu deleted successfully!');
            loadData('waifu');
            document.getElementById('delete-waifu-form').reset();
          } else {
            alert('Error deleting waifu: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error deleting waifu.');
          console.error(err);
        });
    }

    function addMedia() {
      const media = {
        title: document.getElementById('mediaTitle').value,
        type: document.getElementById('mediaType').value,
        releaseYear: document.getElementById('mediaReleaseYear').value,
        studioID: document.getElementById('mediaStudio').value
      };

      fetch('add_media.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(media)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Media added successfully!');
            loadData('media');
            document.getElementById('add-media-form').reset();
          } else {
            alert('Error adding media: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding media.');
          console.error(err);
        });
    }

    function addStudio() {
      const studio = {
        name: document.getElementById('studioName').value,
        location: document.getElementById('studioLocation').value,
        foundedYear: document.getElementById('studioFoundedYear').value
      };

      fetch('add_studio.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(studio)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Studio added successfully!');
            loadData('studio');
            document.getElementById('add-studio-form').reset();
          } else {
            alert('Error adding studio: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding studio.');
          console.error(err);
        });
    }

    function addVoiceActor() {
      const voiceActor = {
        name: document.getElementById('voiceName').value,
        nationality: document.getElementById('voiceNationality').value,
        agency: document.getElementById('voiceAgency').value
      };

      fetch('add_voiceactor.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(voiceActor)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Voice Actor added successfully!');
            loadData('voice');
            document.getElementById('add-voice-form').reset();
          } else {
            alert('Error adding voice actor: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding voice actor.');
          console.error(err);
        });
    }

    function addFandom() {
      const fandom = {
        waifuID: document.getElementById('fandomWaifuID').value,
        fanClubName: document.getElementById('fandomFanClubName').value,
        memberCount: document.getElementById('fandomMemberCount').value,
        platform: document.getElementById('fandomPlatform').value
      };

      fetch('add_fandom.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(fandom)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Fandom added successfully!');
            loadData('fandom');
            document.getElementById('add-fandom-form').reset();
          } else {
            alert('Error adding fandom: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding fandom.');
          console.error(err);
        });
    }

    function addAbility() {
      const ability = {
        waifuID: document.getElementById('abilityWaifuID').value,
        name: document.getElementById('abilityName').value,
        description: document.getElementById('abilityDescription').value,
        type: document.getElementById('abilityType').value
      };

      fetch('add_ability.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(ability)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Ability added successfully!');
            loadData('abilities');
            document.getElementById('add-abilities-form').reset();
          } else {
            alert('Error adding ability: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding ability.');
          console.error(err);
        });
    }

    function addEvent() {
      const event = {
        name: document.getElementById('eventName').value,
        location: document.getElementById('eventLocation').value,
        date: document.getElementById('eventDate').value
      };

      fetch('add_event.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(event)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Event added successfully!');
            loadData('events');
            document.getElementById('add-events-form').reset();
          } else {
            alert('Error adding event: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding event.');
          console.error(err);
        });
    }

    function addMerchandise() {
      const merchandise = {
        waifuID: document.getElementById('merchWaifuID').value,
        name: document.getElementById('merchName').value,
        type: document.getElementById('merchType').value,
        price: document.getElementById('merchPrice').value,
        releaseDate: document.getElementById('merchReleaseDate').value
      };

      fetch('add_merchandise.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(merchandise)
      })
        .then(res => res.json())
        .then(data => {
          if (data.status === 'success') {
            alert('Merchandise added successfully!');
            loadData('merchandise');
            document.getElementById('add-merchandise-form').reset();
          } else {
            alert('Error adding merchandise: ' + data.message);
          }
        })
        .catch(err => {
          alert('Error adding merchandise.');
          console.error(err);
        });
    }

    window.onload = () => {
      searchInput = document.getElementById("searchInput");
      sortSelect = document.getElementById("sortSelect");

      searchInput.addEventListener("input", () => loadData(currentTab));
      sortSelect.addEventListener("change", () => {
        sortPerTab[currentTab] = sortSelect.value;
        loadData(currentTab);
      });

      document.querySelectorAll(".tabs button").forEach(button => {
        button.addEventListener("click", () => {
          loadData(button.dataset.tab);
        });
      });

      loadData('waifu');
    };
  </script>
</body>
</html>